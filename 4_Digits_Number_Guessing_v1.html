<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <style>
        #output {
            height: 30px;
            width: 200px;
            border: 1px solid lightgray
        }
    </style>
</head>

<body>
    <input type="text" name="" id="guess">
    <button type="button" class="btn btn-success" id="button">Send</button>
    <button type="button" class="btn btn-danger" id="test">test</button>
    <br>
    <div class="box" id="output"></div>






    <script src="https://code.jquery.com/jquery-3.5.1.js"
        integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
    <script src="./game.js"></script>
    <script>

        //題目//
        let password = [];
        // 做裡面的迴圈直到array length = 4
        while (password.length < 4) {
            // 隨機產生一個1-9的數
            let num = Math.floor(Math.random() * 10);
            // console.log(num);
            // console.log(password);
            // 如果陣列沒有這個數，就可以加到陣列裡
            if (!password.includes(num)) {
                password.push(num)
                console.log(password)
            }
        }

        // todo: check input要是4碼，要是數字


        // 測試
        document.querySelector("#test").addEventListener("click", function () {
            // split("")轉為字串array(後面再轉為數字比對)
            player_guess = document.querySelector("#guess").value.split("")
            console.log(player_guess)

        });

        // 按下button後判斷幾A幾B
        document.querySelector("#button").addEventListener("click", decideAB
            , false);

        let output = document.querySelector("#output")
        // 判斷幾A幾B
        function decideAB() {
            let a = 0
            let b = 0

            // 首先得到input裡的值
            // split("")轉為字串array(後面再轉為數字比對)
            player_guess = document.querySelector("#guess").value.split("")
            console.log(player_guess)

            for (i = 0; i < 4; i++) {

                // 檢查密碼是否有包含input數字
                // parseInt轉為數字
                // 有-->看位置是否一樣
                if (password.includes(parseInt(player_guess[i]))) {
                    console.log("repeated number= " + player_guess[i])

                    // 位置一樣--> 把a加一
                    if (parseInt(player_guess[i]) == password[i]) {
                        a++
                        console.log("a= " + a)
                    }
                    // 位置不一樣--> 把b加一
                    else {
                        b++
                        console.log("b= " + b)
                    }
                }
                // 沒有--> 0a0b
                else {
                    // do nothing
                }
            }

            // 顯示幾a幾b
            player_guess_str = document.querySelector("#guess").value
            output.innerHTML += `<div>${player_guess_str} : ${a}a${b}b<div>`
            // clear input
            document.querySelector("#guess").value = ""
        }









    </script>
</body>



</html>